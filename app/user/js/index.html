<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" type="text/css" href="main.css">

    <script src="./node_modules/web3/dist/web3.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="./utils.js"></script>
    <script src="./contract.js"></script>
    <script src="./eth_browser_js/ethereumjs-tx-1.3.3.min.js"></script>
    <script src="./eth_browser_js/keythereum.js"></script> 

</head>
<body>
    <div class="container">

        <h1>Deposit SBTC</h1>

        <label for="account" class="col-lg-2 control-label">From Account</label>
        <input id="key_path" type="file"/>

        <label for="password" class="col-lg-2 control-label">Password</label>
        <input id="pwd" type="any" value = "puneet"/>

        <label for="name" class="col-lg-2 control-label">SBTC</label>
        <input id="sbtc" type="any" value="0.00000001">

        <label for="name" class="col-lg-2 control-label">Destination address</label>
        <input id="dest" type="any" value="0x9d465C631F1D8E47B6113Ab204a9410183fcCE05">

        <label for="status" class="col-lg-2 control-label">Status:</label>

        <button id="button">Deposit on RSK</button>

    </div>

    <div style="display:none;" id="rsk_key"></div>   

<script>
    get_account_key("key_path", "rsk_key");
    var web3_eth = init_web3("http://stride.ddns.net:8545"); 
    var web3_rsk = init_web3("http://stride.ddns.net:4444"); 
    contract_rsk = init_rsk_contract(web3_rsk);
    contract_eth = init_eth_contract(web3_eth);
   
    $("#button").click(function() {
        rsk_key = document.getElementById("rsk_key").value;
        console.log(rsk_key);
        password = document.getElementById("pwd").value;
        dest_addr = document.getElementById("dest").value;
        sbtc_amount = document.getElementById("sbtc").value;
        if (rsk_key == null | password == null) {
            console.log("Fill in all fields properly");
            return;
        }    

        /*deposit_sbtc(rsk_key, password, sbtc_amount, dest_addr, 
                     contract_rsk, web3_rsk); */
        issue_ebtc(web3_eth, contract_eth, rsk_key, password, "0x449b31958c526988cad57565c01227a5fb38656ae626a97eaf43746573958df8", sbtc_amount); 

    });

</script>
</body>
</html>
